# ADR 001: Use Rust Edition 2021

## Status
Accepted

## Date
2025-12-15

## Context

Cargo 1.82+ defaults to Rust edition 2024, but we need to choose between 2021 and 2024 for this project.

**Rust 2021**:
- Stable, production-tested (3+ years)
- Full ecosystem support
- Conservative choice

**Rust 2024**:
- Latest features (gen blocks, refined lifetime capture)
- Cutting edge, released February 2024
- May have library compatibility issues

## Decision

Use **Rust Edition 2021** for stability and production-readiness.

## Rationale

1. **Stability**: All dependencies are guaranteed to work
2. **Production-Ready**: Battle-tested in real-world systems
3. **OCaml FFI**: Better compatibility with C FFI bridges
4. **Conservative**: Minimizes risk of edition-related bugs
5. **Team Familiarity**: More developers know 2021 patterns

## Consequences

### Positive
- No compatibility surprises
- Stable foundation for 3-4 month project
- Easier to find solutions to problems (more documentation)

### Negative
- Missing latest Rust features (gen blocks)
- Will need to migrate to 2024 eventually (minor effort)

## Alternatives Considered

**Use Rust 2024**:
- Rejected due to project timeline and need for stability
- Can revisit after Phase 12 (production deployment)

## Implementation

Set in `Cargo.toml`:
```toml
[package]
edition = "2021"
```

## Review Date

After Phase 12 (Month 4) - consider migrating to 2024
